<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lengendofdong.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://lengendofdong.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lengendofdong.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">134</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-%E7%BA%BF%E7%A8%8B%E9%97%B4%E7%9A%84%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-%E7%BA%BF%E7%A8%8B%E9%97%B4%E7%9A%84%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：线程间的同步方式"><a href="#转载：线程间的同步方式" class="headerlink" title="转载：线程间的同步方式"></a>转载：线程间的同步方式</h1><h1 id="线程间的同步方式"><a href="#线程间的同步方式" class="headerlink" title="线程间的同步方式"></a>线程间的同步方式</h1><p>各个线程可以访问进程中的公共变量和资源，所以使用多线程的过程中需要注意的问题是如何防止两个或两个以上的线程同时访问同一个数据，以免破坏数据的完整性。数据之间的相互制约包括直接制约关系和间接制约关系。</p>
<p>线程间的同步方式有四种：</p>
<p>在java中线程同步实现：<br/><br>参考：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/XHJT/p/3897440.html">http://www.cnblogs.com/XHJT/p/3897440.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-%E7%90%86%E8%A7%A3SQL%E5%8E%9F%E7%90%86%EF%BC%8C%E5%86%99%E5%87%BA%E9%AB%98%E6%95%88%E7%9A%84SQL%E8%AF%AD%E5%8F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-%E7%90%86%E8%A7%A3SQL%E5%8E%9F%E7%90%86%EF%BC%8C%E5%86%99%E5%87%BA%E9%AB%98%E6%95%88%E7%9A%84SQL%E8%AF%AD%E5%8F%A5/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：理解SQL原理，写出高效的SQL语句"><a href="#转载：理解SQL原理，写出高效的SQL语句" class="headerlink" title="转载：理解SQL原理，写出高效的SQL语句"></a>转载：理解SQL原理，写出高效的SQL语句</h1><p>转自 <a target="_blank" rel="noopener" href="http://www.nowamagic.net/librarys/veda/detail/1502/">http://www.nowamagic.net/librarys/veda/detail/1502/</a><br/><br>我们做软件开发的，大部分人都离不开跟数据库打交道，特别是erp开发的，跟数据库打交道更是频繁，存储过程动不动就是上千行，如果数据量大，人员流动大，那么我们还能保证下一段时间系统还能流畅的运行吗？我们还能保证下一个人能看懂我们的存储过程吗？</p>
<p>要知道sql语句，我想我们有必要知道sqlserver查询分析器怎么执行我么sql语句的，我么很多人会看执行计划，或者用profile来监视和调优查询语句或者存储过程慢的原因，但是如果我们知道查询分析器的执行逻辑顺序，下手的时候就胸有成竹，那么下手是不是有把握点呢？</p>
<p>查询的逻辑执行顺序<br/><br>FROM &lt; left_table&gt;<br/><br>ON &lt; join_condition&gt;<br/><br>&lt; join_type&gt; JOIN &lt; right_table&gt;<br/><br>WHERE &lt; where_condition&gt;<br/><br>GROUP BY &lt; group_by_list&gt;<br/><br>WITH {cube | rollup}<br/><br>HAVING &lt; having_condition&gt;<br/><br>SELECT<br/><br>DISTINCT<br/><br>ORDER BY &lt; order_by_list&gt;<br/><br>&lt; top_specification&gt; &lt; select_list&gt;<br/><br>标准的SQL 的解析顺序为:</p>
<p>.FROM 子句 组装来自不同数据源的数据<br/><br>.WHERE 子句 基于指定的条件对记录进行筛选<br/><br>.GROUP BY 子句 将数据划分为多个分组<br/><br>.使用聚合函数进行计算<br/><br>.使用HAVING子句筛选分组<br/><br>.计算所有的表达式<br/><br>.使用ORDER BY对结果集进行排序<br/><br>执行顺序<br/><br>FROM：对FROM子句中前两个表执行笛卡尔积生成虚拟表vt1<br/><br>ON:对vt1表应用ON筛选器只有满足&lt; join_condition&gt; 为真的行才被插入vt2<br/><br>OUTER(join)：如果指定了 OUTER JOIN保留表(preserved table)中未找到的行将行作为外部行添加到vt2 生成t3如果from包含两个以上表则对上一个联结生成的结果表和下一个表重复执行步骤和步骤直接结束<br/><br>WHERE：对vt3应用 WHERE 筛选器只有使&lt; where_condition&gt; 为true的行才被插入vt4<br/><br>GROUP BY：按GROUP BY子句中的列列表对vt4中的行分组生成vt5<br/><br>CUBE|ROLLUP：把超组(supergroups)插入vt6 生成vt6<br/><br>HAVING：对vt6应用HAVING筛选器只有使&lt; having_condition&gt; 为true的组才插入vt7<br/><br>SELECT：处理select列表产生vt8<br/><br>DISTINCT：将重复的行从vt8中去除产生vt9<br/><br>ORDER BY：将vt9的行按order by子句中的列列表排序生成一个游标vc10<br/><br>TOP：从vc10的开始处选择指定数量或比例的行生成vt11 并返回调用者<br/><br>看到这里，那么用过linqtosql的语法有点相似啊？如果我们我们了解了sqlserver执行顺序，那么我们就接下来进一步养成日常sql好习惯，也就是在实现功能同时有考虑性能的思想，数据库是能进行集合运算的工具，我们应该尽量的利用这个工具，所谓集合运算实际就是批量运算，就是尽量减少在客户端进行大数据量的循环操作，而用SQL语句或者存储过程代替。</p>
<p>只返回需要的数据<br/><br>返回数据到客户端至少需要数据库提取数据、网络传输数据、客户端接收数据以及客户端处理数据等环节，如果返回不需要的数据，就会增加服务器、网络和客户端的无效劳动，其害处是显而易见的，避免这类事件需要注意：</p>
<ol>
<li>横向来看：</li>
</ol>
<p>不要写SELECT *的语句，而是选择你需要的字段。<br/><br>当在SQL语句中连接多个表时, 请使用表的别名并把别名前缀于每个Column上.这样一来,就可以减少解析的时间并减少那些由Column歧义引起的语法错误。<br/><br>如有表table1（ID,col1）和table2 （ID,col2）</p>
<p>Select <a target="_blank" rel="noopener" href="http://a.id/">A.ID</a>, A.col1, B.col2<br/><br>– Select <a target="_blank" rel="noopener" href="http://a.id/">A.ID</a>, col1, col2 –不要这么写，不利于将来程序扩展<br/><br>from table1 A inner join table2 B on <a target="_blank" rel="noopener" href="http://a.id=b.id/">A.ID&#x3D;B.ID</a> Where …<br/><br>2. 纵向来看：</p>
<p>合理写WHERE子句，不要写没有WHERE的SQL语句。<br/><br>SELECT TOP N * –没有WHERE条件的用此替代<br/><br>尽量少做重复的工作<br/><br>控制同一语句的多次执行，特别是一些基础数据的多次执行是很多程序员很少注意的。<br/><br>减少多次的数据转换，也许需要数据转换是设计的问题，但是减少次数是程序员可以做到的。<br/><br>杜绝不必要的子查询和连接表，子查询在执行计划一般解释成外连接，多余的连接表带来额外的开销。<br/><br>合并对同一表同一条件的多次UPDATE，比如：<br/><br>UPDATE EMPLOYEE SET FNAME&#x3D;‘HAIWER’<br/><br>WHERE EMP_ID&#x3D;’ VPA30890F’ UPDATE EMPLOYEE SET LNAME&#x3D;‘YANG’<br/><br>WHERE EMP_ID&#x3D;’ VPA30890F’<br/><br>这两个语句应该合并成以下一个语句<br/><br>UPDATE EMPLOYEE SET FNAME&#x3D;‘HAIWER’,LNAME&#x3D;‘YANG’  WHERE EMP_ID&#x3D;’ VPA30890F’<br/><br>UPDATE操作不要拆成DELETE操作+INSERT操作的形式，虽然功能相同，但是性能差别是很大的。<br/><br>注意临时表和表变量的用法<br/><br>在复杂系统中，临时表和表变量很难避免，关于临时表和表变量的用法，需要注意：</p>
<p>如果语句很复杂，连接太多，可以考虑用临时表和表变量分步完成。<br/><br>如果需要多次用到一个大表的同一部分数据，考虑用临时表和表变量暂存这部分数据。<br/><br>如果需要综合多个表的数据，形成一个结果，可以考虑用临时表和表变量分步汇总这多个表的数据。<br/><br>其他情况下，应该控制临时表和表变量的使用。<br/><br>关于临时表和表变量的选择，很多说法是表变量在内存，速度快，应该首选表变量，但是在实际使用中发现，主要考虑需要放在临时表的数据量，在数据量较多的情况下，临时表的速度反而更快。执行时间段与预计执行时间(多长)。<br/><br>关于临时表产生使用SELECT INTO和CREATE TABLE + INSERT INTO的选择，一般情况下，SELECT INTO会比CREATE TABLE + INSERT INTO的方法快很多，但是SELECT INTO会锁定TEMPDB的系统表SYSOBJECTS、SYSINDEXES、SYSCOLUMNS，在多用户并发环境下，容易阻塞其他进程，所以我的建议是，在并发系统中，尽量使用CREATE TABLE + INSERT INTO，而大数据量的单个语句使用中，使用SELECT INTO。<br/><br>子查询的用法<br/><br>子查询是一个 SELECT 查询，它嵌套在 SELECT、INSERT、UPDATE、DELETE 语句或其它子查询中。任何允许使用表达式的地方都可以使用子查询，子查询可以使我们的编程灵活多样，可以用来实现一些特殊的功能。但是在性能上，往往一个不合适的子查询用法会形成一个性能瓶颈。如果子查询的条件中使用了其外层的表的字段，这种子查询就叫作相关子查询。相关子查询可以用IN、NOT IN、EXISTS、NOT EXISTS引入。 关于相关子查询，应该注意：</p>
<ol>
<li>NOT IN、NOT EXISTS的相关子查询可以改用LEFT JOIN代替写法。</li>
</ol>
<p>比如：</p>
<p>SELECT PUB_NAME FROM PUBLISHERS WHERE PUB_ID NOT IN (SELECT PUB_ID FROM TITLES WHERE TYPE &#x3D; ‘BUSINESS’)<br/><br>可以改写成：</p>
<p>SELECT A.PUB_NAME FROM PUBLISHERS A LEFT JOIN TITLES B ON B.TYPE &#x3D; ‘BUSINESS’ AND A.PUB_ID&#x3D;B. PUB_ID WHERE B.PUB_ID IS NULL<br/><br>又比如：</p>
<p>SELECT TITLE FROM TITLES<br/><br>WHERE NOT EXISTS<br/><br>(SELECT TITLE_ID FROM SALES<br/><br>WHERE TITLE_ID &#x3D; TITLES.TITLE_ID)<br/><br>可以改写成：</p>
<p>SELECT TITLE<br/><br>FROM TITLES LEFT JOIN SALES<br/><br>ON SALES.TITLE_ID &#x3D; TITLES.TITLE_ID<br/><br>WHERE SALES.TITLE_ID IS NULL<br/><br>2. 如果保证子查询没有重复 ，IN、EXISTS的相关子查询可以用INNER JOIN 代替。比如：</p>
<p>SELECT PUB_NAME<br/><br>FROM PUBLISHERS<br/><br>WHERE PUB_ID IN<br/><br>(SELECT PUB_ID<br/><br>FROM TITLES<br/><br>WHERE TYPE &#x3D; ‘BUSINESS’)<br/><br>可以改写成：</p>
<p>SELECT A.PUB_NAME –SELECT DISTINCT A.PUB_NAME<br/><br>FROM PUBLISHERS A INNER JOIN TITLES B<br/><br>ON        B.TYPE &#x3D; ‘BUSINESS’ AND<br/><br>A.PUB_ID&#x3D;B. PUB_ID<br/><br>3. IN的相关子查询用EXISTS代替，比如</p>
<p>SELECT PUB_NAME FROM PUBLISHERS<br/><br>WHERE PUB_ID IN<br/><br>(SELECT PUB_ID FROM TITLES WHERE TYPE &#x3D; ‘BUSINESS’)<br/><br>可以用下面语句代替：</p>
<p>SELECT PUB_NAME FROM PUBLISHERS WHERE EXISTS<br/><br>(SELECT 1 FROM TITLES WHERE TYPE &#x3D; ‘BUSINESS’ AND<br/><br>PUB_ID&#x3D; PUBLISHERS.PUB_ID)<br/><br>4. 不要用COUNT(*)的子查询判断是否存在记录，最好用LEFT JOIN或者EXISTS，比如有人写这样的语句：</p>
<p>SELECT JOB_DESC FROM JOBS<br/><br>WHERE (SELECT COUNT(*) FROM EMPLOYEE WHERE JOB_ID&#x3D;JOBS.JOB_ID)&#x3D;0<br/><br>应该写成：</p>
<p>SELECT JOBS.JOB_DESC FROM JOBS LEFT JOIN EMPLOYEE<br/><br>ON EMPLOYEE.JOB_ID&#x3D;JOBS.JOB_ID<br/><br>WHERE EMPLOYEE.EMP_ID IS NULL<br/><br>还有</p>
<p>SELECT JOB_DESC FROM JOBS<br/><br>WHERE (SELECT COUNT(*) FROM EMPLOYEE WHERE JOB_ID&#x3D;JOBS.JOB_ID)&lt;&gt;0<br/><br>应该写成：</p>
<p>SELECT JOB_DESC FROM JOBS<br/><br>WHERE EXISTS (SELECT 1 FROM EMPLOYEE WHERE JOB_ID&#x3D;JOBS.JOB_ID)<br/><br>尽量使用索引<br/><br>建立索引后，并不是每个查询都会使用索引，在使用索引的情况下，索引的使用效率也会有很大的差别。只要我们在查询语句中没有强制指定索引，索引的选择和使用方法是SQLSERVER的优化器自动作的选择，而它选择的根据是查询语句的条件以及相关表的统计信息，这就要求我们在写SQL。</p>
<p>语句的时候尽量使得优化器可以使用索引。为了使得优化器能高效使用索引，写语句的时候应该注意：</p>
<p>A、不要对索引字段进行运算，而要想办法做变换，比如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT ID FROM T WHERE NUM/2=100</span><br><span class="line">应改为:</span><br><span class="line">SELECT ID FROM T WHERE NUM=100*2</span><br><span class="line">SELECT ID FROM T WHERE NUM/2=NUM1</span><br><span class="line">如果NUM有索引应改为:</span><br><span class="line">SELECT ID FROM T WHERE NUM=NUM1*2</span><br><span class="line">如果NUM1有索引则不应该改。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>发现过这样的语句：<br/><br>SELECT 年,月,金额 FROM 结余表 	WHERE 100<strong>年+月&#x3D;2010</strong>100+10<br/><br>应该改为：<br/><br>SELECT 年,月,金额 FROM 结余表 WHERE 年&#x3D;2010 AND月&#x3D;10<br/><br>B、 不要对索引字段进行格式转换</p>
<p>日期字段的例子：<br/><br>WHERE CONVERT(VARCHAR(10), 日期字段,120)&#x3D;‘2010-07-15’<br/><br>应该改为<br/><br>WHERE日期字段〉&#x3D;‘2010-07-15’   AND   日期字段&lt;‘2010-07-16’<br/><br>ISNULL转换的例子：<br/><br>WHERE ISNULL(字段,’’)&lt;&gt;’‘应改为:WHERE字段&lt;&gt;’’<br/><br>WHERE ISNULL(字段,’’)&#x3D;’’不应修改<br/><br>WHERE ISNULL(字段,‘F’) &#x3D;’T’应改为: WHERE字段&#x3D;‘T’<br/><br>WHERE ISNULL(字段,‘F’)&lt;&gt;’T’不应修改<br/><br>C、 不要对索引字段使用函数</p>
<p>WHERE LEFT(NAME, 3)&#x3D;‘ABC’ 或者WHERE SUBSTRING(NAME,1, 3)&#x3D;‘ABC’<br/><br>应改为: WHERE NAME LIKE ‘ABC%’<br/><br>日期查询的例子：<br/><br>WHERE DATEDIFF(DAY, 日期,‘2010-06-30’)&#x3D;0<br/><br>应改为:WHERE 日期&gt;&#x3D;‘2010-06-30’ AND 日期 &lt;‘2010-07-01’<br/><br>WHERE DATEDIFF(DAY, 日期,‘2010-06-30’)&gt;0<br/><br>应改为:WHERE 日期 &lt;‘2010-06-30’<br/><br>WHERE DATEDIFF(DAY, 日期,‘2010-06-30’)&gt;&#x3D;0<br/><br>应改为:WHERE 日期 &lt;‘2010-07-01’<br/><br>WHERE DATEDIFF(DAY, 日期,‘2010-06-30’)&lt;0<br/><br>应改为:WHERE 日期&gt;&#x3D;‘2010-07-01’<br/><br>WHERE DATEDIFF(DAY, 日期,‘2010-06-30’)&lt;&#x3D;0<br/><br>应改为:WHERE 日期&gt;&#x3D;‘2010-06-30’<br/><br>4. 不要对索引字段进行多字段连接</p>
<p>比如：<br/><br>WHERE FAME+ ‘. ‘+LNAME&#x3D;‘HAIWEI.YANG’<br/><br>应改为:<br/><br>WHERE FNAME&#x3D;‘HAIWEI’ AND LNAME&#x3D;‘YANG’<br/><br>多表连接的连接条件<br/><br>多表连接的连接条件对索引的选择有着重要的意义，所以我们在写连接条件条件的时候需要特别注意。</p>
<p>多表连接的时候，连接条件必须写全，宁可重复，不要缺漏。<br/><br>连接条件尽量使用聚集索引<br/><br>注意ON、WHERE和HAVING部分条件的区别<br/><br>ON是最先执行， WHERE次之，HAVING最后，因为ON是先把不符合条件的记录过滤后才进行统计，它就可以减少中间运算要处理的数据，按理说应该速度是最快的，WHERE也应该比 HAVING快点的，因为它过滤数据后才进行SUM，在两个表联接时才用ON的，所以在一个表的时候，就剩下WHERE跟HAVING比较了</p>
<p>考虑联接优先顺序：</p>
<p>INNER JOIN<br/><br>LEFT JOIN (注：RIGHT JOIN 用 LEFT JOIN 替代)<br/><br>CROSS JOIN<br/><br>其它注意和了解的地方有：</p>
<p>在IN后面值的列表中，将出现最频繁的值放在最前面，出现得最少的放在最后面，减少判断的次数<br/><br>注意UNION和UNION ALL的区别。–允许重复数据用UNION ALL好<br/><br>注意使用DISTINCT，在没有必要时不要用<br/><br>TRUNCATE TABLE 与 DELETE 区别<br/><br>减少访问数据库的次数<br/><br>还有就是我们写存储过程，如果比较长的话，最后用标记符标开，因为这样可读性很好，即使语句写的不怎么样但是语句工整，C# 有region，sql我比较喜欢用的就是：</p>
<p>–startof  查询在职人数<br/><br>sql语句<br/><br>–end of<br/><br>正式机器上我们一般不能随便调试程序，但是很多时候程序在我们本机上没问题，但是进正式系统就有问题，但是我们又不能随便在正式机器上操作，那么怎么办呢？我们可以用回滚来调试我们的存储过程或者是sql语句，从而排错。</p>
<p>BEGIN TRAN<br/><br>UPDATE a SET 字段&#x3D;’’<br/><br>ROLLBACK<br/><br>作业存储过程我一般会加上下面这段，这样检查错误可以放在存储过程，如果执行错误回滚操作，但是如果程序里面已经有了事务回滚，那么存储过程就不要写事务了，这样会导致事务回滚嵌套降低执行效率，但是我们很多时候可以把检查放在存储过程里，这样有利于我们解读这个存储过程，和排错。</p>
<p>BEGIN TRANSACTION<br/><br>–事务回滚开始<br/><br>–检查报错<br/><br>IF ( @@ERROR &gt; 0 )<br/><br>BEGIN<br/><br>–回滚操作<br/><br>ROLLBACK TRANSACTION<br/><br>RAISERROR(‘删除工作报告错误’, 16, 3)<br/><br>RETURN<br/><br>END<br/><br>–结束事务<br/><br>COMMIT TRANSACTION</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：进程与线程的区别"><a href="#转载：进程与线程的区别" class="headerlink" title="转载：进程与线程的区别"></a>转载：进程与线程的区别</h1><h1 id="进程与线程的定义"><a href="#进程与线程的定义" class="headerlink" title="进程与线程的定义"></a>进程与线程的定义</h1><p>进程：是并发执行的程序在执行过程中分配和管理资源的基本单位，是一个动态概念，竞争计算机系统资源的基本单位。<br/><br>线程：是进程的一个执行单元，是进程内调度实体。比进程更小的独立运行的基本单位。线程也被称为轻量级进程。<br/><br>一个程序至少一个进程，一个进程至少一个线程。</p>
<h2 id="为什么会有线程"><a href="#为什么会有线程" class="headerlink" title="为什么会有线程"></a>为什么会有线程</h2><p>  每个进程都有自己的地址空间，即进程空间，在网络或多用户交换机下，一个服务器通常需要接收大量不确定数量用户的并发请求，为每一个请求都创建一个进程显然行不通（系统开销大，响应用户请求效率低），因此操作系统中线程概念被引进。</p>
<p>线程的改变只代表CPU的执行过程的改变，而没有发生进程所拥有的资源的变化。</p>
<h2 id="进程线程的区别"><a href="#进程线程的区别" class="headerlink" title="进程线程的区别"></a>进程线程的区别</h2><h2 id="何时用"><a href="#何时用" class="headerlink" title="何时用"></a>何时用</h2><p>1）对资源的管理和保护要求高，不限制开销和效率时，使用多进程。<br/><br>2）要求效率高，频繁切换时，资源的保护管理要求不是很高时，使用多线程。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%88Chrome%EF%BC%89%E4%B8%8D%E8%83%BD%E6%8B%96%E6%8B%BD%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%88Chrome%EF%BC%89%E4%B8%8D%E8%83%BD%E6%8B%96%E6%8B%BD%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：谷歌浏览器（Chrome）不能拖拽安装插件"><a href="#转载：谷歌浏览器（Chrome）不能拖拽安装插件" class="headerlink" title="转载：谷歌浏览器（Chrome）不能拖拽安装插件"></a>转载：谷歌浏览器（Chrome）不能拖拽安装插件</h1><p>今天下载了一款谷歌浏览器的插件（crx文件），按照原来的方式安装，</p>
<p>打开扩展程序界面</p>
<p>直接将crx文件拖拽到谷歌浏览器的扩展程序界面。版本稍旧的版本还是可以的，但是更新后的一些版本已经不行了（我的是68版本的）。</p>
<p>不能拖拽安装，那我们只能找其他方法了。</p>
<p>方法一、修改浏览器参数</p>
<p>打开谷歌浏览器，输入地址：<a>chrome:&#x2F;&#x2F;flags&#x2F;#extensions-on-chrome-urls</a> ，会进入到下面的页面</p>
<p>参数修改页面</p>
<p>将Extensions那一项改为Enabled，然后会提示重启浏览器，重启即可，然后就可以拖拽安装插件了。</p>
<p>方法二、修改插件格式</p>
<p>我们下载的插件是crx文件，将插件的后缀名 .crx 改为 .zip或者 .rar，然后将改好后缀名的文件解压到本地文件夹中，然后在 chrome 的设置 -&gt; 更多工具 -&gt; 扩展程序，打开开发者模式后有下面的选项，选择加载已解压的扩展程序，并添加刚才解压的文件。</p>
<p>加载已解压的扩展程序</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-VirtualBox%E6%8C%82%E8%BD%BDLinux%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99-Error%20relaunching%20VirtualBox%20VM%20process-%205%20./">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-VirtualBox%E6%8C%82%E8%BD%BDLinux%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99-Error%20relaunching%20VirtualBox%20VM%20process-%205%20./" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：VirtualBox挂载Linux之后，启动报错：Error-relaunching-VirtualBox-VM-process-5"><a href="#转载：VirtualBox挂载Linux之后，启动报错：Error-relaunching-VirtualBox-VM-process-5" class="headerlink" title="转载：VirtualBox挂载Linux之后，启动报错：Error relaunching VirtualBox VM process: 5 ."></a>转载：VirtualBox挂载Linux之后，启动报错：Error relaunching VirtualBox VM process: 5 .</h1><p>原文地址：<a target="_blank" rel="noopener" href="http://blog.csdn.net/pan_tian/article/details/39181829">http://blog.csdn.net/pan_tian&#x2F;article&#x2F;details&#x2F;39181829</a></p>
<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-Spring%20data%E6%8A%A5%E9%94%99-Inferred%20type%20%E2%80%98S%E2%80%99%20for%20type%20parameter%20%E2%80%98S%E2%80%99%20is%20not%20within%20its%20bound/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-Spring%20data%E6%8A%A5%E9%94%99-Inferred%20type%20%E2%80%98S%E2%80%99%20for%20type%20parameter%20%E2%80%98S%E2%80%99%20is%20not%20within%20its%20bound/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：Spring-data报错：Inferred-type-‘S’-for-type-parameter-‘S’-is-not-within-its-bound"><a href="#转载：Spring-data报错：Inferred-type-‘S’-for-type-parameter-‘S’-is-not-within-its-bound" class="headerlink" title="转载：Spring data报错：Inferred type ‘S’ for type parameter ‘S’ is not within its bound"></a>转载：Spring data报错：Inferred type ‘S’ for type parameter ‘S’ is not within its bound</h1><p>转载自：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012490335/article/details/80380299">https://blog.csdn.net/u012490335/article/details/80380299</a><br/><br>参照<code>org.springframework.data.repository.query.QueryByExampleExecutor</code> 源码：</p>
<p><code>findOne</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Returns a single entity matching the given &#123;@link Example&#125; or &#123;@literal null&#125; if none was found.</span><br><span class="line"> *</span><br><span class="line"> * @param example must not be &#123;@literal null&#125;.</span><br><span class="line"> * @return a single entity matching the given &#123;@link Example&#125; or &#123;@link Optional#empty()&#125; if none was found.</span><br><span class="line"> * @throws org.springframework.dao.IncorrectResultSizeDataAccessException if the Example yields more than one result.</span><br><span class="line"> */</span><br><span class="line">&amp;lt;S extends T&amp;gt; Optional&amp;lt;S&amp;gt; findOne(Example&amp;lt;S&amp;gt; example);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>参照 <code>org.springframework.data.repository.CrudRepository</code>源码：<br/><br><code>findById</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Retrieves an entity by its id.</span><br><span class="line"> * </span><br><span class="line"> * @param id must not be &#123;@literal null&#125;.</span><br><span class="line"> * @return the entity with the given id or &#123;@literal Optional#empty()&#125; if none found</span><br><span class="line"> * @throws IllegalArgumentException if &#123;@code id&#125; is &#123;@literal null&#125;.</span><br><span class="line"> */</span><br><span class="line">Optional&amp;lt;T&amp;gt; findById(ID id);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>findOne(id)</code>用<code>findById(id).orElse(null)</code> 替换即可。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-OSGI%20MANIFEST.MF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-OSGI%20MANIFEST.MF/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：OSGI-MANIFEST-MF"><a href="#转载：OSGI-MANIFEST-MF" class="headerlink" title="转载：OSGI MANIFEST.MF"></a>转载：OSGI MANIFEST.MF</h1><p>&#x2F;META-INF&#x2F;MANIFEST.MF文件中定义了Bundle的元数据信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">Bundle-SymbolicName: 设置Bundle在OSGI容器中的全局唯一标示符。	</span><br><span class="line">	说明：</span><br><span class="line">		1)这个标记是Bundle元数据信息中唯一一个必须设置的标记。</span><br><span class="line">		2)程序根据Bundle-SymbolicName和Bundle-Version在OSGI容器中找到一个独一无二的Bundle。</span><br><span class="line">		3)OSGI容器中不允许有个两个Bundle-SymbolicName和Bundle-Version都相同的Bundle存在。</span><br><span class="line">	参数：</span><br><span class="line">		singleton：表示Bundle是单例的，默认为false。</span><br><span class="line">		fragment-attachment：设置Fragment Bundle是否可以附加到该Bundle中，值可以为：always、never、resolve-time(解析过程中)，默认为always。</span><br><span class="line">	举例：</span><br><span class="line">		Bundle-SymbolicName: com.jxn.osgi.example.impl;singleton:=true</span><br><span class="line">		</span><br><span class="line">Bundle-Version: 设置Bundle的版本号。</span><br><span class="line">	默认：0.0.0</span><br><span class="line">	举例：Bundle-Version: 1.0.0</span><br><span class="line">	</span><br><span class="line">Fragment-Host: 如果该Bundle是一个Fragment Bundle，则该标记表示它的宿主Bundle。</span><br><span class="line">	取值：Bundle-SymbolicName的值。</span><br><span class="line">	参数：Bundle-Version的值。</span><br><span class="line">	</span><br><span class="line">Bundle-ActivationPolicy: 设置Bundle的加载策略。</span><br><span class="line">	默认：Bundle在服务器启动的时候就被激活。</span><br><span class="line">	取值：</span><br><span class="line">		lazy：Bundle将在其它Bundle请求加载该Bundle中的资源时才会被激活。</span><br><span class="line">	</span><br><span class="line">Bundle-Activator: 设置Bundle的启动器类(Activator)。</span><br><span class="line">	说明：</span><br><span class="line">		1)该启动器类必须实现org.osgi.framework.BundleActivator接口。</span><br><span class="line">		2)在bundle启动和停止时会分别调用该类的start()方法和stop()方法。</span><br><span class="line">		3)启动器类(Activator)常用于Bundle启动时注册和初始化服务。</span><br><span class="line">	举例：Bundle-Activator: com.jxn.osgi.example.impl.Activator</span><br><span class="line">		</span><br><span class="line">Bundle-ClassPath: 设置Bundle的类路径。</span><br><span class="line">	说明：该路径应为Bundle内部的合法路径，如果有多个ClassPath，则使用逗号分隔。</span><br><span class="line">	举例：Bundle-ClassPath: ., bin/</span><br><span class="line">		</span><br><span class="line">Bundle-ManifestVersion: 设置Bundle遵循OSGI规范的版本。</span><br><span class="line">	取值：</span><br><span class="line">		1：遵循OSGI R3规范</span><br><span class="line">		2：遵循OSGI R4/R5规范</span><br><span class="line">	举例：Bundle-ManifestVersion: 2</span><br><span class="line">		</span><br><span class="line">Bundle-RequiredExecutionEnvironment: 设置Bundle所需的执行环境。</span><br><span class="line">	说明：如果支持多种执行环境，则使用逗号分隔。</span><br><span class="line">	举例：Bundle-RequiredExecutionEnvironment: J2SE-1.5</span><br><span class="line">		</span><br><span class="line">Bundle-Vendor: 设置Bundle的发行者信息。</span><br><span class="line">	举例：Bundle-Vendor: JXN</span><br><span class="line">		</span><br><span class="line">Bundle-NativeCode: 如果Bundle中需要使用JNI加载其它语言实现的本地代码，则必须使用该标记进行说明。</span><br><span class="line">	参数：</span><br><span class="line">		osname：操作系统名称。</span><br><span class="line">		osversion：操作系统版本。</span><br><span class="line">		processor：处理器。</span><br><span class="line">		language：语言。</span><br><span class="line">		</span><br><span class="line">	举例：Bundle-NativeCode: /lib/http.DLL; osname=QNX; osversion=3.1</span><br><span class="line">	</span><br><span class="line">Import-Package: 设置Bundle中需要导入的包。	</span><br><span class="line">	说明：如果需要导入的包不存在，则会导致Bundle解析失败。</span><br><span class="line">	举例：</span><br><span class="line">		Import-Package: com.jxn.osgi.example.data.model,</span><br><span class="line">						com.jxn.osgi.example.data.service,</span><br><span class="line">						com.jxn.osgi.example.data.types,</span><br><span class="line">						com.jxn.osgi.example.service.context,</span><br><span class="line">						com.jxn.osgi.example.service.model,</span><br><span class="line">						com.jxn.osgi.example.service.role,</span><br><span class="line">						org.osgi.framework,</span><br><span class="line">						org.springframework.osgi.extensions.annotation,</span><br><span class="line">						org.springframework.transaction,</span><br><span class="line">						org.springframework.transaction.annotation</span><br><span class="line"></span><br><span class="line">Export-Package: 设置Bundle中可以被导出的包。</span><br><span class="line">	说明：可以根据类名、版本等过滤</span><br><span class="line">	参数：</span><br><span class="line">		include：包中需要导出的资源。</span><br><span class="line">		exclude：包中禁止导出的资源。</span><br><span class="line">		uses：说明导出包的依赖关系</span><br><span class="line">	举例：</span><br><span class="line">		Export-Package: com.jxn.osgi.example.service.context, </span><br><span class="line">						com.jxn.osgi.example.service.role;include=&quot;IO*&quot;;exclude=&quot;*QueryRole&quot;</span><br><span class="line"></span><br><span class="line">DynamicImport-Package: 设置运行时动态导入的包。</span><br><span class="line">	说明：</span><br><span class="line">		1)如果动态导入的包不存在，那么也不会影响Bundle的正常解析</span><br><span class="line">		2)只有真正使用到需要动态导入的包中的类时，如果该包中的类不存在，此时才会抛出ClassNotFoundException异常。</span><br><span class="line"></span><br><span class="line">Require-Bundle: 设置Bundle所依赖的其它Bundle。</span><br><span class="line">	说明：相当于把依赖的Bundle中所有声明为导出的包都导入了。</span><br><span class="line">	举例：</span><br><span class="line">		Require-Bundle: com.jxn.osgi.example.service, com.jxn.osgi.example.data</span><br><span class="line">	</span><br><span class="line">注意：</span><br><span class="line">	1)Bundle-Name、Bundle-Category、Bundle-ContactAddress、Bundle-Copyright、Bundle-Description、Bundle-DocRUL等标记只供人工阅读，OSGI框架并不会使用它们</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-KeyCode%E5%AF%B9%E7%85%A7%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-KeyCode%E5%AF%B9%E7%85%A7%E8%A1%A8/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：KeyCode对照表"><a href="#转载：KeyCode对照表" class="headerlink" title="转载：KeyCode对照表"></a>转载：KeyCode对照表</h1><p>转载自<a target="_blank" rel="noopener" href="http://www.phpweblog.net/kiyone/archive/2007/04/19/1138.html">http://www.phpweblog.net/kiyone/archive/2007/04/19/1138.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.phpweblog.net/kiyone/archive/2007/04/19/1138.html">Keycode对照表</a></p>
<td colspan="8">**字母和数字键的键码值(keyCode)**</td>
|按键|键码|按键|键码|按键|键码|按键|键码
|A|65|J|74|S|83|1|49
|B|66|K|75|T|84|2|50
|C|67|L|76|U|85|3|51
|D|68|M|77|V|86|4|52
|E|69|N|78|W|87|5|53
|F|70|O|79|X|88|6|54
|G|71|P|80|Y|89|7|55
|H|72|Q|81|Z|90|8|56
|I|73|R|82|0|48|9|57

<p>　　 </p>
<p> </p>
<td colspan="4">**数字键盘上的键的键码值(keyCode)**</td><td colspan="4">**功能键键码值(keyCode)**</td>
|按键|键码|按键|键码|按键|键码|按键|键码
|0|96|8|104|F1|112|F7|118
|1|97|9|105|F2|113|F8|119
|2|98|*|106|F3|114|F9|120
|3|99|+|107|F4|115|F10|121
|4|100|Enter|108|F5|116|F11|122
|5|101|-|109|F6|117|F12|123
|6|102|.|110| | | | 
|7|103|/|111| | | | 

<p>　　 </p>
<p> </p>
<td colspan="8">**控制键键码值(keyCode)**</td>
|按键|键码|按键|键码|按键|键码|按键|键码
|BackSpace|8|Esc|27|Right Arrow|39|-_|189
|Tab|9|Spacebar|32|Dw Arrow|40|.&gt;|190
|Clear|12|Page Up|33|Insert|45|/?|191
|Enter|13|Page Down|34|Delete|46|`~|192
|Shift|16|End|35|Num Lock|144|[{|219
|Control|17|Home|36|;:|186|\||220
|Alt|18|Left Arrow|37|=+|187|]}|221
|Cape Lock|20|Up Arrow|38|,&lt;|188|'"|222

<p> </p>
<td colspan="8">**多媒体键码值(keyCode)**</td>
|按键|键码|按键|键码|按键|键码|按键|键码
|音量加|175| | | | | | 
|音量减|174| | | | | | 
|停止|179| | | | | | 
|静音|173| | | | | | 
|浏览器|172| | | | | | 
|邮件|180| | | | | | 
|搜索|170| | | | | | 
|收藏|171| | | | | | 

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-java%E4%BD%BF%20FileWriter%20FileReader%20%E6%97%A0%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%8COutputStreamWriter%20InputStreamReader%E5%8F%AF%E8%AE%BE%E7%BD%AE%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-java%E4%BD%BF%20FileWriter%20FileReader%20%E6%97%A0%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%8COutputStreamWriter%20InputStreamReader%E5%8F%AF%E8%AE%BE%E7%BD%AE%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：java使-FileWriter-FileReader-无编码格式，OutputStreamWriter-InputStreamReader可设置编码格式"><a href="#转载：java使-FileWriter-FileReader-无编码格式，OutputStreamWriter-InputStreamReader可设置编码格式" class="headerlink" title="转载：java使 FileWriter FileReader 无编码格式，OutputStreamWriter InputStreamReader可设置编码格式"></a>转载：java使 FileWriter FileReader 无编码格式，OutputStreamWriter InputStreamReader可设置编码格式</h1><p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_27093465/article/details/72730796">https://blog.csdn.net/qq_27093465/article/details/72730796</a></p>
<p>使用Java中的 FileWriter FileReader 可以传个文件路径，然后就可以简单的实现，文件的读和写。<br/><br>但是这个实现是太简单了，会有问题的。</p>
<p>简单的代码操作，如我的这篇博文里面的转存文件的代码就是使用这2个类来实现的。</p>
<p>java修改文件名-renameTo()方法的使用实例，复制一个文件或者叫转存一个文件</p>
<p>上面的转存代码，经过findbugs分析，有如下的提示：</p>
<p>具体如下：<br/><br>Found reliance on default encoding: new java.io.FileWriter(String)<br/><br>Reliance on default encoding<br/><br>Found a call to a method which will perform a byte to String (or String to byte) conversion, and will assume that the default platform encoding is suitable. This will cause the application behaviour to vary between platforms. Use an alternative API and specify a charset name or Charset object explicitly.</p>
<p>然后，翻译一下就是下图：</p>
<p>FileWriter FileReader 是不带编码格式的，默认使用本机器的默认编码，那么就会因为编码问题，而bug的。</p>
<p>怎么让 FileWriter FileReader 他们带上编码格式呢？</p>
<p>还是拿转存文件的代码来修改。具体修改如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">private static boolean copyFile(String src, String des) &#123;</span><br><span class="line">    InputStreamReader fr = null;</span><br><span class="line">    OutputStreamWriter fw = null;</span><br><span class="line">    try &#123;</span><br><span class="line">        fr = new InputStreamReader(new FileInputStream(src),&quot;UTF-8&quot;);//读</span><br><span class="line">        fw = new OutputStreamWriter(new FileOutputStream(des), &quot;UTF-8&quot;);//写</span><br><span class="line">        char[] buf = new char[1024];//缓冲区</span><br><span class="line">        int len;</span><br><span class="line">        while ((len = fr.read(buf)) != -1) &#123;</span><br><span class="line">            fw.write(buf, 0, len);//读几个写几个</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        LOG.error(e.getMessage());</span><br><span class="line">        return false;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        if (fr != null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                LOG.error(e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (fw != null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                fw.flush();</span><br><span class="line">                fw.close();</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                LOG.error(e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>重点就是把<br/><br>FileWriter FileReader   换成了  OutputStreamWriter InputStreamReader</p>
<p>new InputStreamReader(new FileInputStream(src),“UTF-8”);&#x2F;&#x2F;读<br/><br>new OutputStreamWriter(new FileOutputStream(des), “UTF-8”);&#x2F;&#x2F;写</p>
<p>这就带上了编码格式了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lengendofdong.github.io/2022/07/31/%E8%BD%AC%E8%BD%BD-Java%20%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%92%8C%E5%A4%84%E7%90%86%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/31/%E8%BD%AC%E8%BD%BD-Java%20%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%92%8C%E5%A4%84%E7%90%86%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-07-31 15:58:18 / Modified: 15:51:32" itemprop="dateCreated datePublished" datetime="2022-07-31T15:58:18+08:00">2022-07-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="转载：Java-中的异常和处理详解"><a href="#转载：Java-中的异常和处理详解" class="headerlink" title="转载：Java 中的异常和处理详解"></a>转载：Java 中的异常和处理详解</h1><h2 id="原文出处：-代码钢琴家"><a href="#原文出处：-代码钢琴家" class="headerlink" title="原文出处： 代码钢琴家"></a>原文出处： <a target="_blank" rel="noopener" href="http://www.cnblogs.com/lulipro/p/7504267.html">代码钢琴家</a></h2><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>程序运行时，发生的不被期望的事件，它阻止了程序按照程序员的预期正常执行，这就是异常。异常发生时，是任程序自生自灭，立刻退出终止，还是输出错误给用户？或者用C语言风格：用函数返回值作为执行状态？。</p>
<p>Java提供了更加优秀的解决办法：异常处理机制。</p>
<p>异常处理机制能让程序在异常发生时，按照代码的预先设定的异常处理逻辑，针对性地处理异常，让程序尽最大可能恢复正常并继续执行，且保持代码的清晰。<br/><br>Java中的异常可以是函数中的语句执行时引发的，也可以是程序员通过throw 语句手动抛出的，只要在Java程序中产生了异常，就会用一个对应类型的异常对象来封装异常，JRE就会试图寻找异常处理程序来处理异常。</p>
<p>Throwable类是Java异常类型的顶层父类，一个对象只有是 Throwable 类的（直接或者间接）实例，他才是一个异常对象，才能被异常处理机制识别。JDK中内建了一些常用的异常类，我们也可以自定义异常。</p>
<h2 id="Java异常的分类和类结构图"><a href="#Java异常的分类和类结构图" class="headerlink" title="Java异常的分类和类结构图"></a>Java异常的分类和类结构图</h2><p>Java标准库内建了一些通用的异常，这些类以Throwable为顶层父类。</p>
<p>Throwable又派生出Error类和Exception类。</p>
<p>错误：Error类以及他的子类的实例，代表了JVM本身的错误。错误不能被程序员通过代码处理，Error很少出现。因此，程序员应该关注Exception为父类的分支下的各种异常类。</p>
<p>异常：Exception以及他的子类，代表程序运行时发送的各种不期望发生的事件。可以被Java异常处理机制使用，是异常处理的核心。</p>
<p>总体上我们根据Javac对异常的处理要求，将异常类分为2类。</p>
<p>非检查异常（unckecked exception）：Error 和 RuntimeException 以及他们的子类。javac在编译时，不会提示和发现这样的异常，不要求在程序处理这些异常。所以如果愿意，我们可以编写代码处理（使用try…catch…finally）这样的异常，也可以不处理。对于这些异常，我们应该修正代码，而不是去通过异常处理器处理 。这样的异常发生的原因多半是代码写的有问题。如除0错误ArithmeticException，错误的强制类型转换错误ClassCastException，数组索引越界ArrayIndexOutOfBoundsException，使用了空对象NullPointerException等等。</p>
<p>检查异常（checked exception）：除了Error 和 RuntimeException的其它异常。javac强制要求程序员为这样的异常做预备处理工作（使用try…catch…finally或者throws）。在方法中要么用try-catch语句捕获它并处理，要么用throws子句声明抛出它，否则编译不会通过。这样的异常一般是由程序的运行环境导致的。因为程序可能被运行在各种未知的环境下，而程序员无法干预用户如何使用他编写的程序，于是程序员就应该为这样的异常时刻准备着。如SQLException , IOException,ClassNotFoundException 等。</p>
<p>需要明确的是：检查和非检查是对于javac来说的，这样就很好理解和区分了。</p>
<h2 id="初识异常"><a href="#初识异常" class="headerlink" title="初识异常"></a>初识异常</h2><p>下面的代码会演示2个异常类型：ArithmeticException 和 InputMismatchException。前者由于整数除0引发，后者是输入的数据不能被转换为int类型引发。<br>|1234567891011121314151617181920212223242526272829303132333435363738394041|<code>package</code> <code>com.example;``import</code> <code>java. util .Scanner ;``public</code> <code>class</code> <code>AllDemo``&#123;``      ``public</code> <code>static</code> <code>void</code> <code>main (String [] args )``      ``&#123;``            ``System . out. println( ``&quot;----欢迎使用命令行除法计算器----&quot;</code> <code>) ;``            ``CMDCalculate ();``      ``&#125;``      ``public</code> <code>static</code> <code>void</code> <code>CMDCalculate ()``      ``&#123;``            ``Scanner scan = ``new</code> <code>Scanner ( System. in );``            ``int</code> <code>num1 = scan .nextInt () ;``            ``int</code> <code>num2 = scan .nextInt () ;``            ``int</code> <code>result = devide (num1 , num2 ) ;``            ``System . out. println( ``&quot;result:&quot;</code> <code>+ result) ;``            ``scan .close () ;``      ``&#125;``      ``public</code> <code>static</code> <code>int</code> <code>devide (``int</code> <code>num1, ``int</code> <code>num2 )&#123;``            ``return</code> <code>num1 / num2 ;``      ``&#125;``&#125;``/*****************************************</code> <code>----欢迎使用命令行除法计算器----``0``Exception in thread &quot;main&quot; java.lang.ArithmeticException : / by zero``     ``at com.example.AllDemo.devide( AllDemo.java:30 )``     ``at com.example.AllDemo.CMDCalculate( AllDemo.java:22 )``     ``at com.example.AllDemo.main( AllDemo.java:12 )</code> <code>----欢迎使用命令行除法计算器----``r``Exception in thread &quot;main&quot; java.util.InputMismatchException``     ``at java.util.Scanner.throwFor( Scanner.java:864 )``     ``at java.util.Scanner.next( Scanner.java:1485 )``     ``at java.util.Scanner.nextInt( Scanner.java:2117 )``     ``at java.util.Scanner.nextInt( Scanner.java:2076 )``     ``at com.example.AllDemo.CMDCalculate( AllDemo.java:20 )``     ``at com.example.AllDemo.main( AllDemo.java:12 )``*****************************************/</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p>26</p>
<p>28</p>
<p>30</p>
<p>32</p>
<p>34</p>
<p>36</p>
<p>38</p>
<p>40</p>
<p><code>package</code> <code>com.example;</code></p>
<p><code>public</code> <code>class</code> <code>AllDemo</code></p>
<p><code>      ``public</code> <code>static</code> <code>void</code> <code>main (String [] args )</code></p>
<p><code>            ``System . out. println( ``&quot;----欢迎使用命令行除法计算器----&quot;</code> <code>) ;</code></p>
<p><code>      ``&#125;</code></p>
<p><code>      ``&#123;</code></p>
<p><code>            ``int</code> <code>num1 = scan .nextInt () ;</code></p>
<p><code>            ``int</code> <code>result = devide (num1 , num2 ) ;</code></p>
<p><code>            ``scan .close () ;</code></p>
<p><code>      ``public</code> <code>static</code> <code>int</code> <code>devide (``int</code> <code>num1, ``int</code> <code>num2 )&#123;</code></p>
<p><code>      ``&#125;</code></p>
<p><code>/*****************************************</code></p>
<p><code>----欢迎使用命令行除法计算器----</code></p>
<p><code>Exception in thread &quot;main&quot; java.lang.ArithmeticException : / by zero</code></p>
<p><code>     ``at com.example.AllDemo.CMDCalculate( AllDemo.java:22 )</code></p>
<p> </p>
<p><code>r</code></p>
<p><code>     ``at java.util.Scanner.throwFor( Scanner.java:864 )</code></p>
<p><code>     ``at java.util.Scanner.nextInt( Scanner.java:2117 )</code></p>
<p><code>     ``at com.example.AllDemo.CMDCalculate( AllDemo.java:20 )</code></p>
<p><code>*****************************************/</code></p>
<p>异常是在执行某个函数时引发的，而函数又是层级调用，形成调用栈的，因为，只要一个函数发生了异常，那么他的所有的caller都会被异常影响。当这些被影响的函数以异常信息输出时，就形成的了异常追踪栈。</p>
<p>异常最先发生的地方，叫做异常抛出点。</p>
<p>从上面的例子可以看出，当devide函数发生除0异常时，devide函数将抛出ArithmeticException异常，因此调用他的CMDCalculate函数也无法正常完成，因此也发送异常，而CMDCalculate的caller——main 因为CMDCalculate抛出异常，也发生了异常，这样一直向调用栈的栈底回溯。这种行为叫做异常的冒泡，异常的冒泡是为了在当前发生异常的函数或者这个函数的caller中找到最近的异常处理程序。由于这个例子中没有使用任何异常处理机制，因此异常最终由main函数抛给JRE，导致程序终止。</p>
<p>上面的代码不使用异常处理机制，也可以顺利编译，因为2个异常都是非检查异常。但是下面的例子就必须使用异常处理机制，因为异常是检查异常。</p>
<p>代码中我选择使用throws声明异常，让函数的调用者去处理可能发生的异常。但是为什么只throws了IOException呢？因为FileNotFoundException是IOException的子类，在处理范围内。<br>|123456789101112131415|<code>@Test``public</code> <code>void</code> <code>testException() ``throws</code> <code>IOException``&#123;``    ``//FileInputStream的构造函数会抛出FileNotFoundException``    ``FileInputStream fileIn = ``new</code> <code>FileInputStream(``&quot;E:\\a.txt&quot;``);</code> <code>    ``int</code> <code>word;``    ``//read方法会抛出IOException``    ``while``((word =  fileIn.read())!=-``1``) ``    ``&#123;``        ``System.out.print((``char``)word);``    ``&#125;``    ``//close方法会抛出IOException``    ``fileIn.clos``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p><code>@Test</code></p>
<p><code>&#123;</code></p>
<p><code>    ``FileInputStream fileIn = ``new</code> <code>FileInputStream(``&quot;E:\\a.txt&quot;``);</code></p>
<p><code>    ``int</code> <code>word;</code></p>
<p><code>    ``while``((word =  fileIn.read())!=-``1``) </code></p>
<p><code>        ``System.out.print((``char``)word);</code></p>
<p><code>    ``//close方法会抛出IOException</code></p>
<p><code>&#125;</code></p>
<h2 id="异常处理的基本语法"><a href="#异常处理的基本语法" class="headerlink" title="异常处理的基本语法"></a>异常处理的基本语法</h2><p>在编写代码处理异常时，对于检查异常，有2种不同的处理方式：使用try…catch…finally语句块处理它。或者，在函数签名中使用throws 声明交给函数调用者caller去解决。</p>
<p>try…catch…finally语句块<br>|123456789101112131415161718192021|<code>try``&#123;``     ``//try块中放可能发生异常的代码。``     ``//如果执行完try且不发生异常，则接着去执行finally块和finally后面的代码（如果有的话）。``     ``//如果发生异常，则尝试去匹配catch块。</code> <code>&#125;``catch``(SQLException SQLexception)&#123;``    ``//每一个catch块用于捕获并处理一个特定的异常，或者这异常类型的子类。Java7中可以将多个异常声明在一个catch中。``    ``//catch后面的括号定义了异常类型和异常参数。如果异常与之匹配且是最先匹配到的，则虚拟机将使用这个catch块来处理异常。``    ``//在catch块中可以使用这个块的异常参数来获取异常的相关信息。异常参数是这个catch块中的局部变量，其它块不能访问。``    ``//如果当前try块中发生的异常在后续的所有catch中都没捕获到，则先去执行finally，然后到这个函数的外部caller中去匹配异常处理器。``    ``//如果try中没有发生异常，则所有的catch块将被忽略。</code> <code>&#125;``catch``(Exception exception)&#123;``    ``//...``&#125;``finally``&#123;</code> <code>    ``//finally块通常是可选的。``   ``//无论异常是否发生，异常是否匹配被处理，finally都会执行。``   ``//一个try至少要有一个catch块，否则， 至少要有1个finally块。但是finally不是用来处理异常的，finally不会捕获异常。``  ``//finally主要做一些清理工作，如流的关闭，数据库连接的关闭等。 ``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p><code>try``&#123;</code></p>
<p><code>     ``//如果执行完try且不发生异常，则接着去执行finally块和finally后面的代码（如果有的话）。</code></p>
<p> </p>
<p><code>    ``//每一个catch块用于捕获并处理一个特定的异常，或者这异常类型的子类。Java7中可以将多个异常声明在一个catch中。</code></p>
<p><code>    ``//在catch块中可以使用这个块的异常参数来获取异常的相关信息。异常参数是这个catch块中的局部变量，其它块不能访问。</code></p>
<p><code>    ``//如果try中没有发生异常，则所有的catch块将被忽略。</code></p>
<p><code>&#125;``catch``(Exception exception)&#123;</code></p>
<p><code>&#125;``finally``&#123;</code></p>
<p><code>    ``//finally块通常是可选的。</code></p>
<p><code>   ``//一个try至少要有一个catch块，否则， 至少要有1个finally块。但是finally不是用来处理异常的，finally不会捕获异常。</code></p>
<p><code>&#125;</code></p>
<p><strong>需要注意的地方</strong></p>
<p>1、try块中的局部变量和catch块中的局部变量（包括异常变量），以及finally中的局部变量，他们之间不可共享使用。</p>
<p>2、每一个catch块用于处理一个异常。异常匹配是按照catch块的顺序从上往下寻找的，只有第一个匹配的catch会得到执行。匹配时，不仅运行精确匹配，也支持父类匹配，因此，如果同一个try块下的多个catch异常类型有父子关系，应该将子类异常放在前面，父类异常放在后面，这样保证每个catch块都有存在的意义。</p>
<p>3、java中，异常处理的任务就是将执行控制流从异常发生的地方转移到能够处理这种异常的地方去。也就是说：当一个函数的某条语句发生异常时，这条语句的后面的语句不会再执行，它失去了焦点。执行流跳转到最近的匹配的异常处理catch代码块去执行，异常被处理完后，执行流会接着在“处理了这个异常的catch代码块”后面接着执行。<br/><br>有的编程语言当异常被处理后，控制流会恢复到异常抛出点接着执行，这种策略叫做：resumption model of exception handling（恢复式异常处理模式 ）<br/><br>而Java则是让执行流恢复到处理了异常的catch块后接着执行，这种策略叫做：termination model of exception handling（终结式异常处理模式）<br>|1234567891011|<code>public</code> <code>static</code> <code>void</code> <code>main(String[] args)&#123;``        ``try</code> <code>&#123;``            ``foo();``        ``&#125;``catch``(ArithmeticException ae) &#123;``            ``System.out.println(``&quot;处理异常&quot;``);``        ``&#125;``&#125;``public</code> <code>static</code> <code>void</code> <code>foo()&#123;``        ``int</code> <code>a = ``5``/``0``;  ``//异常抛出点``        ``System.out.println(``&quot;为什么还不给我涨工资!!!&quot;``);  ``//////////////////////不会执行``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p><code>public</code> <code>static</code> <code>void</code> <code>main(String[] args)&#123;</code></p>
<p><code>            ``foo();</code></p>
<p><code>            ``System.out.println(``&quot;处理异常&quot;``);</code></p>
<p><code>&#125;</code></p>
<p><code>        ``int</code> <code>a = ``5``/``0``;  ``//异常抛出点</code></p>
<p><code>&#125;</code></p>
<p>throws 函数声明</p>
<p>throws声明：如果一个方法内部的代码会抛出检查异常（checked exception），而方法自己又没有完全处理掉，则javac保证你必须在方法的签名上使用throws关键字声明这些可能抛出的异常，否则编译不通过。</p>
<p>throws是另一种处理异常的方式，它不同于try…catch…finally，throws仅仅是将函数中可能出现的异常向调用者声明，而自己则不具体处理。</p>
<p>采取这种异常处理的原因可能是：方法本身不知道如何处理这样的异常，或者说让调用者处理更好，调用者需要为可能发生的异常负责。<br>|1234|<code>public</code> <code>void</code> <code>foo() ``throws</code> <code>ExceptionType1 , ExceptionType2 ,ExceptionTypeN``&#123; ``     ``//foo内部可以抛出 ExceptionType1 , ExceptionType2 ,ExceptionTypeN 类的异常，或者他们的子类的异常对象。``&#125;</code></p>
<p>2</p>
<p>4</p>
<p><code>&#123; </code></p>
<p><code>&#125;</code></p>
<h2 id="finally块"><a href="#finally块" class="headerlink" title="finally块"></a>finally块</h2><p>finally块不管异常是否发生，只要对应的try执行了，则它一定也执行。只有一种方法让finally块不执行：System.exit()。因此finally块通常用来做资源释放操作：关闭文件，关闭数据库连接等等。</p>
<p>良好的编程习惯是：在try块中打开资源，在finally块中清理释放这些资源。</p>
<p>需要注意的地方:</p>
<p>1、finally块没有处理异常的能力。处理异常的只能是catch块。</p>
<p>2、在同一try…catch…finally块中 ，如果try中抛出异常，且有匹配的catch块，则先执行catch块，再执行finally块。如果没有catch块匹配，则先执行finally，然后去外面的调用者中寻找合适的catch块。</p>
<p>3、在同一try…catch…finally块中 ，try发生异常，且匹配的catch块中处理异常时也抛出异常，那么后面的finally也会执行：首先执行finally块，然后去外围调用者中寻找合适的catch块。</p>
<p>这是正常的情况，但是也有特例。关于finally有很多恶心，偏、怪、难的问题，我在本文最后统一介绍了，电梯速达-&gt;：finally块和return</p>
<h2 id="throw-异常抛出语句"><a href="#throw-异常抛出语句" class="headerlink" title="throw 异常抛出语句"></a>throw 异常抛出语句</h2><p>throw exceptionObject</p>
<p>程序员也可以通过throw语句手动显式的抛出一个异常。throw语句的后面必须是一个异常对象。</p>
<p>throw 语句必须写在函数中，执行throw 语句的地方就是一个异常抛出点，它和由JRE自动形成的异常抛出点没有任何差别。<br>|1234567|<code>public</code> <code>void</code> <code>save(User user)``&#123;``      ``if``(user  == ``null``) ``          ``throw</code> <code>new</code> <code>IllegalArgumentException(``&quot;User对象为空&quot;``);``      ``//......</code> <code>&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p><code>public</code> <code>void</code> <code>save(User user)</code></p>
<p><code>      ``if``(user  == ``null``) </code></p>
<p><code>      ``//......</code></p>
<p><code>&#125;</code></p>
<h2 id="异常的链化"><a href="#异常的链化" class="headerlink" title="异常的链化"></a>异常的链化</h2><p>在一些大型的，模块化的软件开发中，一旦一个地方发生异常，则如骨牌效应一样，将导致一连串的异常。假设B模块完成自己的逻辑需要调用A模块的方法，如果A模块发生异常，则B也将不能完成而发生异常，但是B在抛出异常时，会将A的异常信息掩盖掉，这将使得异常的根源信息丢失。异常的链化可以将多个模块的异常串联起来，使得异常信息不会丢失。</p>
<p>异常链化:以一个异常对象为参数构造新的异常对象。新的异对象将包含先前异常的信息。这项技术主要是异常类的一个带Throwable参数的函数来实现的。这个当做参数的异常，我们叫他根源异常（cause）。</p>
<p>查看Throwable类源码，可以发现里面有一个Throwable字段cause，就是它保存了构造时传递的根源异常参数。这种设计和链表的结点类设计如出一辙，因此形成链也是自然的了。<br>|12345678910111213141516|<code>public</code> <code>class</code> <code>Throwable ``implements</code> <code>Serializable &#123;``    ``private</code> <code>Throwable cause = ``this``;</code> <code>    ``public</code> <code>Throwable(String message, Throwable cause) &#123;``        ``fillInStackTrace();``        ``detailMessage = message;``        ``this``.cause = cause;``    ``&#125;``     ``public</code> <code>Throwable(Throwable cause) &#123;``        ``fillInStackTrace();``        ``detailMessage = (cause==``null</code> <code>? ``null</code> <code>: cause.toString());``        ``this``.cause = cause;``    ``&#125;</code> <code>    ``//........``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p><code>    ``private</code> <code>Throwable cause = ``this``;</code></p>
<p><code>    ``public</code> <code>Throwable(String message, Throwable cause) &#123;</code></p>
<p><code>        ``detailMessage = message;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>        ``fillInStackTrace();</code></p>
<p><code>        ``this``.cause = cause;</code></p>
<p> </p>
<p><code>&#125;</code></p>
<p>下面是一个例子，演示了异常的链化：从命令行输入2个int，将他们相加，输出。输入的数不是int，则导致getInputNumbers异常，从而导致add函数异常，则可以在add函数中抛出</p>
<p>一个链化的异常。<br>|123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960|<code>public</code> <code>static</code> <code>void</code> <code>main(String[] args)``&#123;</code> <code>    ``System.out.println(``&quot;请输入2个加数&quot;``);``    ``int</code> <code>result;``    ``try``    ``&#123;``        ``result = add();``        ``System.out.println(``&quot;结果:&quot;``+result);``    ``&#125; ``catch</code> <code>(Exception e)&#123;``        ``e.printStackTrace();``    ``&#125;``&#125;``//获取输入的2个整数返回``private</code> <code>static</code> <code>List&amp;lt;Integer&amp;gt; getInputNumbers()``&#123;``    ``List&amp;lt;Integer&amp;gt; nums = ``new</code> <code>ArrayList&amp;lt;&amp;gt;();``    ``Scanner scan = ``new</code> <code>Scanner(System.in);``    ``try</code> <code>&#123;``        ``int</code> <code>num1 = scan.nextInt();``        ``int</code> <code>num2 = scan.nextInt();``        ``nums.add(``new</code> <code>Integer(num1));``        ``nums.add(``new</code> <code>Integer(num2));``    ``&#125;``catch``(InputMismatchException immExp)&#123;``        ``throw</code> <code>immExp;``    ``&#125;``finally</code> <code>&#123;``        ``scan.close();``    ``&#125;``    ``return</code> <code>nums;``&#125;</code> <code>//执行加法计算``private</code> <code>static</code> <code>int</code> <code>add() ``throws</code> <code>Exception``&#123;``    ``int</code> <code>result;``    ``try</code> <code>&#123;``        ``List&amp;lt;Integer&amp;gt; nums =getInputNumbers();``        ``result = nums.get(``0``)  + nums.get(``1``);``    ``&#125;``catch``(InputMismatchException immExp)&#123;``        ``throw</code> <code>new</code> <code>Exception(``&quot;计算失败&quot;``,immExp);  ``/////////////////////////////链化:以一个异常对象为参数构造新的异常对象。``    ``&#125;``    ``return</code>  <code>result;``&#125;</code> <code>/*``请输入2个加数``r 1``java.lang.Exception: 计算失败``    ``at practise.ExceptionTest.add(ExceptionTest.java:53)``    ``at practise.ExceptionTest.main(ExceptionTest.java:18)``Caused by: java.util.InputMismatchException``    ``at java.util.Scanner.throwFor(Scanner.java:864)``    ``at java.util.Scanner.next(Scanner.java:1485)``    ``at java.util.Scanner.nextInt(Scanner.java:2117)``    ``at java.util.Scanner.nextInt(Scanner.java:2076)``    ``at practise.ExceptionTest.getInputNumbers(ExceptionTest.java:30)``    ``at practise.ExceptionTest.add(ExceptionTest.java:48)``    ``... 1 more</code> <code>*/</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p>26</p>
<p>28</p>
<p>30</p>
<p>32</p>
<p>34</p>
<p>36</p>
<p>38</p>
<p>40</p>
<p>42</p>
<p>44</p>
<p>46</p>
<p>48</p>
<p>50</p>
<p>52</p>
<p>54</p>
<p>56</p>
<p>58</p>
<p>60</p>
<p><code>&#123;</code></p>
<p><code>    ``System.out.println(``&quot;请输入2个加数&quot;``);</code></p>
<p><code>    ``try</code></p>
<p><code>        ``result = add();</code></p>
<p><code>    ``&#125; ``catch</code> <code>(Exception e)&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>//获取输入的2个整数返回</code></p>
<p><code>&#123;</code></p>
<p><code>    ``Scanner scan = ``new</code> <code>Scanner(System.in);</code></p>
<p><code>        ``int</code> <code>num1 = scan.nextInt();</code></p>
<p><code>        ``nums.add(``new</code> <code>Integer(num1));</code></p>
<p><code>    ``&#125;``catch``(InputMismatchException immExp)&#123;</code></p>
<p><code>    ``&#125;``finally</code> <code>&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>&#125;</code></p>
<p><code>//执行加法计算</code></p>
<p><code>&#123;</code></p>
<p><code>    ``try</code> <code>&#123;</code></p>
<p><code>        ``result = nums.get(``0``)  + nums.get(``1``);</code></p>
<p><code>        ``throw</code> <code>new</code> <code>Exception(``&quot;计算失败&quot;``,immExp);  ``/////////////////////////////链化:以一个异常对象为参数构造新的异常对象。</code></p>
<p><code>    ``return</code>  <code>result;</code></p>
<p> </p>
<p><code>请输入2个加数</code></p>
<p><code>java.lang.Exception: 计算失败</code></p>
<p><code>    ``at practise.ExceptionTest.main(ExceptionTest.java:18)</code></p>
<p><code>    ``at java.util.Scanner.throwFor(Scanner.java:864)</code></p>
<p><code>    ``at java.util.Scanner.nextInt(Scanner.java:2117)</code></p>
<p><code>    ``at practise.ExceptionTest.getInputNumbers(ExceptionTest.java:30)</code></p>
<p><code>    ``... 1 more</code></p>
<p><code>*/</code></p>
<h2 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h2><p>如果要自定义异常类，则扩展Exception类即可，因此这样的自定义异常都属于检查异常（checked exception）。如果要自定义非检查异常，则扩展自RuntimeException。</p>
<p>按照国际惯例，自定义的异常应该总是包含如下的构造函数：</p>
<p>下面是IOException类的完整源代码，可以借鉴。<br>|123456789101112131415161718192021222324|<code>public</code> <code>class</code> <code>IOException ``extends</code> <code>Exception``&#123;``    ``static</code> <code>final</code> <code>long</code> <code>serialVersionUID = 7818375828146090155L;</code> <code>    ``public</code> <code>IOException()``    ``&#123;``        ``super``();``    ``&#125;</code> <code>    ``public</code> <code>IOException(String message)``    ``&#123;``        ``super``(message);``    ``&#125;</code> <code>    ``public</code> <code>IOException(String message, Throwable cause)``    ``&#123;``        ``super``(message, cause);``    ``&#125;</code> <code>    ``public</code> <code>IOException(Throwable cause)``    ``&#123;``        ``super``(cause);``    ``&#125;``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p><code>&#123;</code></p>
<p> </p>
<p><code>    ``&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>    ``public</code> <code>IOException(String message)</code></p>
<p><code>        ``super``(message);</code></p>
<p> </p>
<p><code>    ``&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>    ``public</code> <code>IOException(Throwable cause)</code></p>
<p><code>        ``super``(cause);</code></p>
<p><code>&#125;</code></p>
<h2 id="异常的注意事项"><a href="#异常的注意事项" class="headerlink" title="异常的注意事项"></a>异常的注意事项</h2><p>1、当子类重写父类的带有 throws声明的函数时，其throws声明的异常必须在父类异常的可控范围内——用于处理父类的throws方法的异常处理器，必须也适用于子类的这个带throws方法 。这是为了支持多态。</p>
<p>例如，父类方法throws 的是2个异常，子类就不能throws 3个及以上的异常。父类throws IOException，子类就必须throws IOException或者IOException的子类。</p>
<p>至于为什么？我想，也许下面的例子可以说明。<br>|1234567891011121314151617181920212223242526272829303132333435363738|<code>class</code> <code>Father``&#123;``    ``public</code> <code>void</code> <code>start() ``throws</code> <code>IOException``    ``&#123;``        ``throw</code> <code>new</code> <code>IOException();``    ``&#125;``&#125;</code> <code>class</code> <code>Son ``extends</code> <code>Father``&#123;``    ``public</code> <code>void</code> <code>start() ``throws</code> <code>Exception``    ``&#123;``        ``throw</code> <code>new</code> <code>SQLException();``    ``&#125;``&#125;``/**********************假设上面的代码是允许的（实质是错误的）***********************/``class</code> <code>Test``&#123;``    ``public</code> <code>static</code> <code>void</code> <code>main(String[] args)``    ``&#123;``        ``Father[] objs = ``new</code> <code>Father[``2``];``        ``objs[``0``] = ``new</code> <code>Father();``        ``objs[``1``] = ``new</code> <code>Son();</code> <code>        ``for``(Father obj:objs)``        ``&#123;``        ``//因为Son类抛出的实质是SQLException，而IOException无法处理它。``        ``//那么这里的try。。catch就不能处理Son中的异常。``        ``//多态就不能实现了。``            ``try</code> <code>&#123;``                 ``obj.start();``            ``&#125;``catch``(IOException)``            ``&#123;``                 ``//处理IOException``            ``&#125;``         ``&#125;``   ``&#125;``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p>26</p>
<p>28</p>
<p>30</p>
<p>32</p>
<p>34</p>
<p>36</p>
<p>38</p>
<p><code>&#123;</code></p>
<p><code>    ``&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p> </p>
<p><code>&#123;</code></p>
<p><code>    ``&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>/**********************假设上面的代码是允许的（实质是错误的）***********************/</code></p>
<p><code>&#123;</code></p>
<p><code>    ``&#123;</code></p>
<p><code>        ``objs[``0``] = ``new</code> <code>Father();</code></p>
<p> </p>
<p><code>        ``&#123;</code></p>
<p><code>        ``//那么这里的try。。catch就不能处理Son中的异常。</code></p>
<p><code>            ``try</code> <code>&#123;</code></p>
<p><code>            ``&#125;``catch``(IOException)</code></p>
<p><code>                 ``//处理IOException</code></p>
<p><code>         ``&#125;</code></p>
<p><code>&#125;</code></p>
<p>2、Java程序可以是多线程的。每一个线程都是一个独立的执行流，独立的函数调用栈。如果程序只有一个线程，那么没有被任何代码处理的异常 会导致程序终止。如果是多线程的，那么没有被任何代码处理的异常仅仅会导致异常所在的线程结束。</p>
<p>也就是说，Java中的异常是线程独立的，线程的问题应该由线程自己来解决，而不要委托到外部，也不会直接影响到其它线程的执行。</p>
<h2 id="finally块和return"><a href="#finally块和return" class="headerlink" title="finally块和return"></a>finally块和return</h2><p>首先一个不容易理解的事实：在 try块中即便有return，break，continue等改变执行流的语句，finally也会执行。<br>|12345678910111213141516|<code>public</code> <code>static</code> <code>void</code> <code>main(String[] args)``&#123;``    ``int</code> <code>re = bar();``    ``System.out.println(re);``&#125;``private</code> <code>static</code> <code>int</code> <code>bar() ``&#123;``    ``try``&#123;``        ``return</code> <code>5``;``    ``&#125; ``finally``&#123;``        ``System.out.println(``&quot;finally&quot;``);``    ``&#125;``&#125;``/*输出：``finally``*/</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p><code>&#123;</code></p>
<p><code>    ``System.out.println(re);</code></p>
<p><code>private</code> <code>static</code> <code>int</code> <code>bar() </code></p>
<p><code>    ``try``&#123;</code></p>
<p><code>    ``&#125; ``finally``&#123;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>/*输出：</code></p>
<p><code>*/</code></p>
<p>很多人面对这个问题时，总是在归纳执行的顺序和规律，不过我觉得还是很难理解。我自己总结了一个方法。用如下GIF图说明。</p>
<p>也就是说：try…catch…finally中的return 只要能执行，就都执行了，他们共同向同一个内存地址（假设地址是0×80）写入返回值，后执行的将覆盖先执行的数据，而真正被调用者取的返回值就是最后一次写入的。那么，按照这个思想，下面的这个例子也就不难理解了。</p>
<p>finally中的return 会覆盖 try 或者catch中的返回值。<br>|123456789101112131415161718192021222324252627282930313233|<code>public</code> <code>static</code> <code>void</code> <code>main(String[] args)``    ``&#123;``        ``int</code> <code>result;</code> <code>        ``result  =  foo();``        ``System.out.println(result);     ``/////////2</code> <code>        ``result = bar();``        ``System.out.println(result);    ``/////////2``    ``&#125;</code> <code>    ``@SuppressWarnings``(``&quot;finally&quot;``)``    ``public</code> <code>static</code> <code>int</code> <code>foo()``    ``&#123;``        ``trz&#123;``            ``int</code> <code>a = ``5</code> <code>/ ``0``;``        ``&#125; ``catch</code> <code>(Exception e)&#123;``            ``return</code> <code>1``;``        ``&#125; ``finally``&#123;``            ``return</code> <code>2``;``        ``&#125;</code> <code>    ``&#125;</code> <code>    ``@SuppressWarnings``(``&quot;finally&quot;``)``    ``public</code> <code>static</code> <code>int</code> <code>bar()``    ``&#123;``        ``try</code> <code>&#123;``            ``return</code> <code>1``;``        ``&#125;``finally</code> <code>&#123;``            ``return</code> <code>2``;``        ``&#125;``    ``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p>26</p>
<p>28</p>
<p>30</p>
<p>32</p>
<p><code>public</code> <code>static</code> <code>void</code> <code>main(String[] args)</code></p>
<p><code>        ``int</code> <code>result;</code></p>
<p><code>        ``result  =  foo();</code></p>
<p> </p>
<p><code>        ``System.out.println(result);    ``/////////2</code></p>
<p> </p>
<p><code>    ``public</code> <code>static</code> <code>int</code> <code>foo()</code></p>
<p><code>        ``trz&#123;</code></p>
<p><code>        ``&#125; ``catch</code> <code>(Exception e)&#123;</code></p>
<p><code>        ``&#125; ``finally``&#123;</code></p>
<p><code>        ``&#125;</code></p>
<p><code>    ``&#125;</code></p>
<p><code>    ``@SuppressWarnings``(``&quot;finally&quot;``)</code></p>
<p><code>    ``&#123;</code></p>
<p><code>            ``return</code> <code>1``;</code></p>
<p><code>            ``return</code> <code>2``;</code></p>
<p><code>    ``&#125;</code></p>
<p>finally中的return会抑制（消灭）前面try或者catch块中的异常<br>|12345678910111213141516171819202122232425262728293031323334353637383940414243444546|<code>class</code> <code>TestException``&#123;``    ``public</code> <code>static</code> <code>void</code> <code>main(String[] args)``    ``&#123;``        ``int</code> <code>result;``        ``try``&#123;``            ``result = foo();``            ``System.out.println(result);           ``//输出100``        ``&#125; ``catch</code> <code>(Exception e)&#123;``            ``System.out.println(e.getMessage());    ``//没有捕获到异常``        ``&#125;</code> <code>        ``try``&#123;``            ``result  = bar();``            ``System.out.println(result);           ``//输出100``        ``&#125; ``catch</code> <code>(Exception e)&#123;``            ``System.out.println(e.getMessage());    ``//没有捕获到异常``        ``&#125;``    ``&#125;</code> <code>    ``//catch中的异常被抑制``    ``@SuppressWarnings``(``&quot;finally&quot;``)``    ``public</code> <code>static</code> <code>int</code> <code>foo() ``throws</code> <code>Exception``    ``&#123;``        ``try</code> <code>&#123;``            ``int</code> <code>a = ``5``/``0``;``            ``return</code> <code>1``;``        ``&#125;``catch``(ArithmeticException amExp) &#123;``            ``throw</code> <code>new</code> <code>Exception(``&quot;我将被忽略，因为下面的finally中使用了return&quot;``);``        ``&#125;``finally</code> <code>&#123;``            ``return</code> <code>100``;``        ``&#125;``    ``&#125;</code> <code>    ``//try中的异常被抑制``    ``@SuppressWarnings``(``&quot;finally&quot;``)``    ``public</code> <code>static</code> <code>int</code> <code>bar() ``throws</code> <code>Exception``    ``&#123;``        ``try</code> <code>&#123;``            ``int</code> <code>a = ``5``/``0``;``            ``return</code> <code>1``;``        ``&#125;``finally</code> <code>&#123;``            ``return</code> <code>100``;``        ``&#125;``    ``&#125;``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p>26</p>
<p>28</p>
<p>30</p>
<p>32</p>
<p>34</p>
<p>36</p>
<p>38</p>
<p>40</p>
<p>42</p>
<p>44</p>
<p>46</p>
<p><code>&#123;</code></p>
<p><code>    ``&#123;</code></p>
<p><code>        ``try``&#123;</code></p>
<p><code>            ``System.out.println(result);           ``//输出100</code></p>
<p><code>            ``System.out.println(e.getMessage());    ``//没有捕获到异常</code></p>
<p> </p>
<p><code>            ``result  = bar();</code></p>
<p><code>        ``&#125; ``catch</code> <code>(Exception e)&#123;</code></p>
<p><code>        ``&#125;</code></p>
<p> </p>
<p><code>    ``@SuppressWarnings``(``&quot;finally&quot;``)</code></p>
<p><code>    ``&#123;</code></p>
<p><code>            ``int</code> <code>a = ``5``/``0``;</code></p>
<p><code>        ``&#125;``catch``(ArithmeticException amExp) &#123;</code></p>
<p><code>        ``&#125;``finally</code> <code>&#123;</code></p>
<p><code>        ``&#125;</code></p>
<p> </p>
<p><code>    ``@SuppressWarnings``(``&quot;finally&quot;``)</code></p>
<p><code>    ``&#123;</code></p>
<p><code>            ``int</code> <code>a = ``5``/``0``;</code></p>
<p><code>        ``&#125;``finally</code> <code>&#123;</code></p>
<p><code>        ``&#125;</code></p>
<p><code>&#125;</code></p>
<p>finally中的异常会覆盖（消灭）前面try或者catch中的异常<br>|123456789101112131415161718192021222324252627282930313233343536373839404142434445|<code>class</code> <code>TestException``&#123;``    ``public</code> <code>static</code> <code>void</code> <code>main(String[] args)``    ``&#123;``        ``int</code> <code>result;``        ``try``&#123;``            ``result = foo();``        ``&#125; ``catch</code> <code>(Exception e)&#123;``            ``System.out.println(e.getMessage());    ``//输出：我是finaly中的Exception``        ``&#125;</code> <code>        ``try``&#123;``            ``result  = bar();``        ``&#125; ``catch</code> <code>(Exception e)&#123;``            ``System.out.println(e.getMessage());    ``//输出：我是finaly中的Exception``        ``&#125;``    ``&#125;</code> <code>    ``//catch中的异常被抑制``    ``@SuppressWarnings``(``&quot;finally&quot;``)``    ``public</code> <code>static</code> <code>int</code> <code>foo() ``throws</code> <code>Exception``    ``&#123;``        ``try</code> <code>&#123;``            ``int</code> <code>a = ``5``/``0``;``            ``return</code> <code>1``;``        ``&#125;``catch``(ArithmeticException amExp) &#123;``            ``throw</code> <code>new</code> <code>Exception(``&quot;我将被忽略，因为下面的finally中抛出了新的异常&quot;``);``        ``&#125;``finally</code> <code>&#123;``            ``throw</code> <code>new</code> <code>Exception(``&quot;我是finaly中的Exception&quot;``);``        ``&#125;``    ``&#125;</code> <code>    ``//try中的异常被抑制``    ``@SuppressWarnings``(``&quot;finally&quot;``)``    ``public</code> <code>static</code> <code>int</code> <code>bar() ``throws</code> <code>Exception``    ``&#123;``        ``try</code> <code>&#123;``            ``int</code> <code>a = ``5``/``0``;``            ``return</code> <code>1``;``        ``&#125;``finally</code> <code>&#123;``            ``throw</code> <code>new</code> <code>Exception(``&quot;我是finaly中的Exception&quot;``);``        ``&#125;</code> <code>    ``&#125;``&#125;</code></p>
<p>2</p>
<p>4</p>
<p>6</p>
<p>8</p>
<p>10</p>
<p>12</p>
<p>14</p>
<p>16</p>
<p>18</p>
<p>20</p>
<p>22</p>
<p>24</p>
<p>26</p>
<p>28</p>
<p>30</p>
<p>32</p>
<p>34</p>
<p>36</p>
<p>38</p>
<p>40</p>
<p>42</p>
<p>44</p>
<p><code>class</code> <code>TestException</code></p>
<p><code>    ``public</code> <code>static</code> <code>void</code> <code>main(String[] args)</code></p>
<p><code>        ``int</code> <code>result;</code></p>
<p><code>            ``result = foo();</code></p>
<p><code>            ``System.out.println(e.getMessage());    ``//输出：我是finaly中的Exception</code></p>
<p> </p>
<p><code>            ``result  = bar();</code></p>
<p><code>            ``System.out.println(e.getMessage());    ``//输出：我是finaly中的Exception</code></p>
<p><code>    ``&#125;</code></p>
<p><code>    ``//catch中的异常被抑制</code></p>
<p><code>    ``public</code> <code>static</code> <code>int</code> <code>foo() ``throws</code> <code>Exception</code></p>
<p><code>        ``try</code> <code>&#123;</code></p>
<p><code>            ``return</code> <code>1``;</code></p>
<p><code>            ``throw</code> <code>new</code> <code>Exception(``&quot;我将被忽略，因为下面的finally中抛出了新的异常&quot;``);</code></p>
<p><code>            ``throw</code> <code>new</code> <code>Exception(``&quot;我是finaly中的Exception&quot;``);</code></p>
<p><code>    ``&#125;</code></p>
<p><code>    ``//try中的异常被抑制</code></p>
<p><code>    ``public</code> <code>static</code> <code>int</code> <code>bar() ``throws</code> <code>Exception</code></p>
<p><code>        ``try</code> <code>&#123;</code></p>
<p><code>            ``return</code> <code>1``;</code></p>
<p><code>            ``throw</code> <code>new</code> <code>Exception(``&quot;我是finaly中的Exception&quot;``);</code></p>
<p> </p>
<p><code>&#125;</code></p>
<p>上面的3个例子都异于常人的编码思维，因此我建议：</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
